<div class="ux-page" [attr.aria-busy]="loading() ? 'true' : null">
  <header class="ux-header">
    <h1>Nueva tabla</h1>
    <a routerLink="/db-studio" class="btn-outline">Cancelar</a>
  </header>

  <div class="ux-card">
    <div class="grid grid-cols-1 lg:grid-cols-3 gap-3">
      <div>
        <label>Schema</label>
        <input type="text" class="inp" [formControl]="form.controls.schema">
      </div>
      <div class="lg:col-span-2">
        <label>Nombre de tabla</label>
        <input type="text" class="inp" [formControl]="form.controls.table" placeholder="mi_tabla">
      </div>
    </div>

    <h3 style="margin:.75rem 0">Columnas</h3>

    <div *ngFor="let col of columnsFA.controls; let i = index" class="col-row">
      <input type="text" class="inp" [formControl]="col.controls.name" placeholder="nombre" />
      <input type="text" class="inp" [formControl]="col.controls.type" placeholder="tipo (text, integer, uuid...)" />
      <label class="chk">
        <input type="checkbox" [formControl]="col.controls.nullable" /> Nullable
      </label>
      <input type="text" class="inp" [formControl]="col.controls.default" placeholder="default (opcional)" />
      <select class="inp" [formControl]="col.controls.identity">
        <option [ngValue]="null">(sin identity)</option>
        <option [ngValue]="'always'">generated always</option>
        <option [ngValue]="'by_default'">generated by default</option>
      </select>
      <button type="button" class="btn-outline" (click)="removeColumn(i)">Eliminar</button>
    </div>

    <div class="actions">
      <button type="button" class="btn-outline" (click)="addColumn()">+ Columna</button>
      <button type="button" class="btn-primary" (click)="submit()">Crear</button>
    </div>

    <p class="error" *ngIf="error()">{{ error() }}</p>
  </div>
</div>
